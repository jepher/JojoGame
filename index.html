<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Dio's Bizarre Adventure</title>
    <script src="src/phaser.js"></script>
    <style>
        #phaser-app{ 
            width: 960;
            height: 700;
            margin: 0 auto;
            display: table;
            position: fixed;
            cursor: none;
        }  
    </style>
</head>
<body>
    <div id='phaser-app'>
        <!-- import js files -->
        <script src="src/functions.js"></script>

        <script src="src/scenes/menu.js"></script>
        <script src="src/scenes/help.js"></script>
        <script src="src/scenes/arena.js"></script>

        <script src="src/entities/characters/jotaro.js"></script>
        <script src="src/entities/characters/dio.js"></script>

        <script src="src/entities/enemies/cop.js"></script>
        <script src="src/entities/enemies/soldier.js"></script>
        <script src="src/entities/enemies/swat.js"></script>
        <script src="src/entities/enemies/sniper.js"></script>
        <script src="src/entities/enemies/pyro.js"></script>
        <script src="src/entities/enemies/robocop.js"></script>
        <script src="src/entities/enemies/mech.js"></script>
        <script src="src/entities/enemies/sentinel.js"></script>
        <script src="src/entities/enemies/bomber.js"></script>
        <script src="src/entities/enemies/robot.js"></script>

        <script src="src/entities//effects/explosion.js"></script>

        <script type="text/javascript">
            var map;
            var groundLayer, wallLayer, obstacleLayer, passableLayer;

            var player;
            var autoAttack ;
            var cursor;
            var keys;
            
            // effects
            var effects = [];

            // projectiles
            var projectiles = [];
            var playerProjectiles = [];
            var BetweenPoints;
            var SetToAngle;
            var velocityFromRotation;

            // depth manager
            var currentDepth;
            var projectileDepth;
            var spawnDepth;
            var bossDepth;
            var arialProjectileDepth;
            var arialSpawnDepth;
            var playerDepth;
            var textDepth;

            // audio
            var backgroundMusic;
            var backgroundMusicLooped;
            var damageSFX;
            var pistolSFX;
            var sniperSFX;
            var rifleBurstSFX;
            var rifleSpraySFX;
            var explosionSFX;
            var flamethrowerSFX;
            var jetpackSFX;
            var laserSFX;
            var laserBurstSFX;
            var gatlingGunChargeSFX;
            var gatlingGun;
            var shockSFX;
            var mechStartSFX;
            var zawarudo;
            var muda;
            var jotaroTimestop;
            var gameOverSFX;

            // teams
            var enemies = [];

            // spawning
            var lastSpawn;
            var difficulty = 0;
            var hardMode = false; // spawn during boss fight
            var spawnSoldiers = false;
            var spawnDelay = 4000;
            var spawnCounter;
            var delayArr = [];
            var swatDelay = 5;
            var sniperDelay = 10;
            var pyroDelay = 13;
            var robocopDelay = 16;
            var bossFight = false;
            var bossSpawned = false;
            var lastBossFight = 0;
            var bossesKilled = 0;

            // scene manager
            var scenes = ['menu', 'help', 'arena'];
            var currentScene = 0;

            // game state
            var paused;
            var pausedText;
            var gameOver;
            var gameStatus;
            var gameOverScore;
            var gameOverText;
            var lastBlink;
            var blinkDelay = 500;

            // timer
            var timerEvents = [];

            // key binds
            var keyP;
            var keyR;
            var keyW;
            var keyA;
            var keyS;
            var keyD;
            var keyQ;
            var keyE;
            var keyR;

            // score
            var score;
            var highscore = 0;
            var scoreText;

            const config = {
                type : Phaser.AUTO,
                width: 960,
                height: 700,
                parent: 'phaser-app',
                physics:{
                    default: 'arcade',
                    arcade: {
                        debug: false,
                        overlapBias: 20,
                        TILE_BIAS: 32
                    }
                },
                scene:[menuScene, helpScene, arenaScene]
            }

            var game = new Phaser.Game(config);
        </script>	
    </div>
	
</body>
</html>